{"version":3,"sources":["../static/js/10.3f7ea329.chunk.js","app/admin/components/assignsurveys/AssignSurveysPage.js","app/admin/components/assignsurveys/Selection.js"],"names":["webpackJsonp","1526","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__","__WEBPACK_IMPORTED_MODULE_2_react_apollo__","__WEBPACK_IMPORTED_MODULE_3__graphql_mutations__","__WEBPACK_IMPORTED_MODULE_4__graphql_queries__","__WEBPACK_IMPORTED_MODULE_5__Selection__","__WEBPACK_IMPORTED_MODULE_6__style__","AssignSurveysPage","_ref","companyName","company","pathname","location","a","createElement","query","GET_EMPLOYEES","variables","_ref2","loading","error","getEmployees","data","networkStatus","employees","mutation","ASSIGN_SURVEYS","assignSurvey","users","update","survey","header","content","1632","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","done","then","err","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__","__WEBPACK_IMPORTED_MODULE_3__style__","__WEBPACK_IMPORTED_MODULE_4__common_search__","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","getOptions","options","map","option","_id","text","firstName","lastName","email","mobile","firstTime","Selection","_Component","_temp","_this","_ret","_this2","_len","args","_key","getPrototypeOf","concat","state","errors","selected","notSelected","filterTerm","componentDidMount","_this$props","setState","filter","user","surveyName","handleAdd","id","prevProps","details","handleRemove","submit","mark","_callee","wrap","_context","prev","next","x","assign","sent","abrupt","message","stop","handleSearch","e","_ref3","preventDefault","toLowerCase","handleFilter","hasOwnProperty","includes","_this3","_state","selectedFiltered","notSelectedFiltered","icon","toUpperCase","list","size","search","placeholder","animated","divided","verticalAlign","Item","Content","floated","positive","onClick","Icon","name","Header","fluid","primary","negative","Component","getDerivedStateFromProps","nextProps","prevState"],"mappings":"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","file":"static/js/10.3f7ea329.chunk.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 1526:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_apollo__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__graphql_mutations__ = __webpack_require__(260);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__graphql_queries__ = __webpack_require__(176);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Selection__ = __webpack_require__(1632);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__style__ = __webpack_require__(784);\nvar AssignSurveysPage=function AssignSurveysPage(_ref){var companyName=_ref.company.companyName,pathname=_ref.location.pathname;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_apollo__[\"c\" /* Query */],{query:__WEBPACK_IMPORTED_MODULE_4__graphql_queries__[\"b\" /* GET_EMPLOYEES */],variables:{companyName:companyName}},function(_ref2){var loading=_ref2.loading,error=_ref2.error,getEmployees=_ref2.data.getEmployees,networkStatus=_ref2.networkStatus;if(loading){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__style__[\"d\" /* StyledLoading */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h2',null,'...loading'));}if(networkStatus===4){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__style__[\"d\" /* StyledLoading */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h2',null,'Refetching!'));}if(error){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__style__[\"b\" /* StyledError */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('h2',null,'Error!: '+error));}if(getEmployees){if(!getEmployees.employees){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__style__[\"f\" /* StyledSurveyDiv */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_semantic_ui_react__[\"o\" /* Message */],{error:true,header:'no staff available',content:'check that you have created employees before trying to assign surveys'}));}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_react_apollo__[\"b\" /* Mutation */],{mutation:__WEBPACK_IMPORTED_MODULE_3__graphql_mutations__[\"a\" /* ASSIGN_SURVEYS */]},function(assignSurvey){if(pathname==='/admin-dashboard/assign/ps'){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__Selection__[\"a\" /* default */],{users:getEmployees.employees,update:assignSurvey,survey:'participant'});}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__Selection__[\"a\" /* default */],{users:getEmployees.employees,update:assignSurvey,survey:'management'});});}});};/* harmony default export */ __webpack_exports__[\"default\"] = (AssignSurveysPage);\n\n/***/ }),\n\n/***/ 1632:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(261);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__ = __webpack_require__(264);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__style__ = __webpack_require__(784);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_search__ = __webpack_require__(785);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var getOptions=function getOptions(options){return options.map(function(option){return{key:\"\"+option._id,text:option.firstName+\" \"+option.lastName+\", \"+option.email,value:{_id:option._id,companyName:option.companyName,mobile:option.mobile,firstTime:option.firstTime}};});};var Selection=function(_Component){_inherits(Selection,_Component);function Selection(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,Selection);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Selection.__proto__||Object.getPrototypeOf(Selection)).call.apply(_ref,[this].concat(args))),_this),_this.state={done:false,errors:[],selected:[],notSelected:[],survey:\"\",filterTerm:\"\"},_this.componentDidMount=function(){var _this$props=_this.props,users=_this$props.users,survey=_this$props.survey;_this.setState({selected:getOptions(users.filter(function(user){return user.surveyName===survey;})),notSelected:getOptions(users.filter(function(user){return user.surveyName!==survey;})),survey:survey});},_this.handleAdd=function(id){_this.setState(function(prevProps){var details=prevProps.notSelected.filter(function(user){return user.value._id===id;})[0];return{notSelected:prevProps.notSelected.filter(function(user){return user.value._id!==id;}),selected:[].concat(_toConsumableArray(prevProps.selected),[details])};});},_this.handleRemove=function(id){_this.setState(function(prevProps){var details=prevProps.selected.filter(function(user){return user.value._id===id;})[0];return{selected:prevProps.selected.filter(function(user){return user.value._id!==id;}),notSelected:[].concat(_toConsumableArray(prevProps.notSelected),[details])};});},_this.submit=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){var errors;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.props.update({variables:{surveyName:_this.state.survey,employees:_this.state.selected.map(function(x){return Object.assign({},x.value);})}});case 2:errors=_context.sent;if(!errors.assignSurvey){_context.next=5;break;}return _context.abrupt(\"return\",_this.setState({errors:errors.assignSurvey.map(function(err){return err.message;})}));case 5:_this.setState({done:true});case 6:case\"end\":return _context.stop();}}},_callee,_this2);})),_this.handleSearch=function(e,_ref3){var value=_ref3.value;e.preventDefault();var filterTerm=value.toLowerCase();_this.setState({filterTerm:filterTerm});},_this.handleFilter=function(user){if(user&&user.hasOwnProperty(\"text\")){return user.text.toLowerCase().includes(_this.state.filterTerm);}return false;},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(Selection,[{key:\"render\",value:function render(){var _this3=this;var _state=this.state,selected=_state.selected,survey=_state.survey,done=_state.done,errors=_state.errors,notSelected=_state.notSelected,filterTerm=_state.filterTerm;var selectedFiltered=filterTerm.length>0?selected.filter(this.handleFilter):selected;var notSelectedFiltered=filterTerm.length>0?notSelected.filter(this.handleFilter):notSelected;if(done){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__style__[\"f\" /* StyledSurveyDiv */],null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Message\"],{info:true,icon:\"inbox\",header:survey.toUpperCase()+\" Survey assigned and SMS messages Sent\",content:\"All messages have been sent and reminders scheduled\"}));}if(errors.length>1){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__style__[\"f\" /* StyledSurveyDiv */],null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Message\"],{error:true,header:\"There were some errors with your submission\",list:errors}));}return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__style__[\"f\" /* StyledSurveyDiv */],null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Header\"],{size:\"medium\"},\"ADD USERS TO \"+survey.toUpperCase()+\" SURVEY\"),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__common_search__[\"a\" /* default */],{search:this.handleSearch,placeholder:\"find user\"}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"],{animated:true,divided:true,verticalAlign:\"middle\"},notSelectedFiltered.map(function(x){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Item,{key:x.key+\"add\"},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Content,{floated:\"right\"},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Button\"],{positive:true,onClick:function onClick(){return _this3.handleAdd(x.key);}},\"Add\")),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Icon,{name:\"plus\"}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Content,null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Header,null,x.text)));})),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Button\"],{onClick:this.submit,fluid:true,primary:true},\"Save & Send SMS\"),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Header\"],{size:\"medium\"},\"REMOVE USERS FROM \"+survey.toUpperCase()+\" SURVEY\"),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"],{animated:true,verticalAlign:\"top\",size:\"medium\"},selectedFiltered.map(function(x){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Item,{key:x.key},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Content,{floated:\"right\"},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"Button\"],{negative:true,onClick:function onClick(){return _this3.handleRemove(x.key);}},\"Remove\")),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Icon,{name:\"close\"}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Content,null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_semantic_ui_react_dist_commonjs__[\"List\"].Header,null,x.text)));})));}}]);return Selection;}(__WEBPACK_IMPORTED_MODULE_1_react__[\"Component\"]);Selection.getDerivedStateFromProps=function(nextProps,prevState){if(nextProps.survey!==prevState.survey){var users=nextProps.users,survey=nextProps.survey;return{done:false,errors:[],selected:getOptions(users.filter(function(user){return user.surveyName===survey;})),notSelected:getOptions(users.filter(function(user){return user.surveyName!==survey;})),survey:survey};}return null;};/* harmony default export */ __webpack_exports__[\"a\"] = (Selection);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.3f7ea329.chunk.js","import React from 'react'\nimport { Message } from 'semantic-ui-react'\nimport { Query, Mutation } from 'react-apollo'\nimport { ASSIGN_SURVEYS } from '../../../../graphql/mutations'\nimport { GET_EMPLOYEES } from '../../../../graphql/queries'\nimport Selection from './Selection'\nimport { StyledLoading, StyledError, StyledSurveyDiv } from '../style'\n\n\nconst AssignSurveysPage = ({ company: { companyName }, location: { pathname } }) => {\n  return (\n    <Query query={GET_EMPLOYEES} variables={{ companyName }}>\n      {\n        ({ loading, error, data: { getEmployees }, networkStatus }) => {\n          if (loading) { return (<StyledLoading><h2>...loading</h2></StyledLoading>) }\n          if (networkStatus === 4) { return <StyledLoading><h2>Refetching!</h2></StyledLoading> }\n          if (error) { return <StyledError><h2>{`Error!: ${error}`}</h2></StyledError> }\n\n\n          if (getEmployees) {\n            if (!getEmployees.employees) {\n              return (\n                <StyledSurveyDiv>\n                  <Message\n                    error\n                    header={'no staff available'}\n                    content='check that you have created employees before trying to assign surveys'\n                  />\n                </StyledSurveyDiv>\n              )\n            }\n            return (\n              <Mutation mutation={ASSIGN_SURVEYS}>\n                {\n                  assignSurvey => {\n                    if (pathname === '/admin-dashboard/assign/ps') {\n                      return (\n                        <Selection users={getEmployees.employees} update={assignSurvey} survey='participant' />\n                      )\n                    }\n                    return (\n                      <Selection users={getEmployees.employees} update={assignSurvey} survey='management' />\n                    )\n                  }\n                }\n              </Mutation>\n            )\n          }\n\n        }\n      }\n    </Query>\n  )\n}\n\nexport default AssignSurveysPage\n\n\n// WEBPACK FOOTER //\n// ./src/app/admin/components/assignsurveys/AssignSurveysPage.js","import React, { Component } from \"react\";\nimport { Button, Message, Header, List } from \"semantic-ui-react/dist/commonjs\";\nimport { StyledSurveyDiv } from \"../style\";\nimport Search from \"../../../common/search\";\n\nconst getOptions = options =>\n  options.map(option => {\n    return {\n      key: `${option._id}`,\n      text: `${option.firstName} ${option.lastName}, ${option.email}`,\n      value: {\n        _id: option._id,\n        companyName: option.companyName,\n        mobile: option.mobile,\n        firstTime: option.firstTime\n      }\n    };\n  });\n\nclass Selection extends Component {\n  state = {\n    done: false,\n    errors: [],\n    selected: [],\n    notSelected: [],\n    survey: \"\",\n    filterTerm: \"\"\n  };\n  static getDerivedStateFromProps = (nextProps, prevState) => {\n    if (nextProps.survey !== prevState.survey) {\n      const { users, survey } = nextProps;\n      return {\n        done: false,\n        errors: [],\n        selected: getOptions(users.filter(user => user.surveyName === survey)),\n        notSelected: getOptions(\n          users.filter(user => user.surveyName !== survey)\n        ),\n        survey: survey\n      };\n    }\n    return null;\n  };\n\n  componentDidMount = () => {\n    const { users, survey } = this.props;\n    this.setState({\n      selected: getOptions(users.filter(user => user.surveyName === survey)),\n      notSelected: getOptions(users.filter(user => user.surveyName !== survey)),\n      survey: survey\n    });\n  };\n\n  handleAdd = id => {\n    this.setState(prevProps => {\n      const details = prevProps.notSelected.filter(\n        user => user.value._id === id\n      )[0];\n      return {\n        notSelected: prevProps.notSelected.filter(\n          user => user.value._id !== id\n        ),\n        selected: [...prevProps.selected, details]\n      };\n    });\n  };\n\n  handleRemove = id => {\n    this.setState(prevProps => {\n      const details = prevProps.selected.filter(\n        user => user.value._id === id\n      )[0];\n      return {\n        selected: prevProps.selected.filter(user => user.value._id !== id),\n        notSelected: [...prevProps.notSelected, details]\n      };\n    });\n  };\n  submit = async () => {\n    const errors = await this.props.update({\n      variables: {\n        surveyName: this.state.survey,\n        employees: this.state.selected.map(x => ({ ...x.value }))\n      }\n    });\n    if (errors.assignSurvey) {\n      return this.setState({\n        errors: errors.assignSurvey.map(err => err.message)\n      });\n    }\n    this.setState({ done: true });\n  };\n\n  handleSearch = (e, { value }) => {\n    e.preventDefault();\n    const filterTerm = value.toLowerCase();\n    this.setState({ filterTerm });\n  };\n\n  handleFilter = user => {\n    if (user && user.hasOwnProperty(\"text\")) {\n      return user.text.toLowerCase().includes(this.state.filterTerm);\n    }\n    return false;\n  };\n\n  render() {\n    const {\n      selected,\n      survey,\n      done,\n      errors,\n      notSelected,\n      filterTerm\n    } = this.state;\n    const selectedFiltered =\n      filterTerm.length > 0 ? selected.filter(this.handleFilter) : selected;\n    const notSelectedFiltered =\n      filterTerm.length > 0\n        ? notSelected.filter(this.handleFilter)\n        : notSelected;\n\n    if (done) {\n      return (\n        <StyledSurveyDiv>\n          <Message\n            info\n            icon=\"inbox\"\n            header={`${survey.toUpperCase()} Survey assigned and SMS messages Sent`}\n            content=\"All messages have been sent and reminders scheduled\"\n          />\n        </StyledSurveyDiv>\n      );\n    }\n    if (errors.length > 1) {\n      return (\n        <StyledSurveyDiv>\n          <Message\n            error\n            header=\"There were some errors with your submission\"\n            list={errors}\n          />\n        </StyledSurveyDiv>\n      );\n    }\n\n    return (\n      <StyledSurveyDiv>\n        <Header size=\"medium\">{`ADD USERS TO ${survey.toUpperCase()} SURVEY`}</Header>\n        <Search search={this.handleSearch} placeholder=\"find user\" />\n        <List animated divided verticalAlign=\"middle\">\n          {notSelectedFiltered.map(x => (\n            <List.Item key={x.key + \"add\"}>\n              <List.Content floated=\"right\">\n                <Button positive onClick={() => this.handleAdd(x.key)}>\n                  Add\n                </Button>\n              </List.Content>\n              <List.Icon name=\"plus\" />\n              <List.Content>\n                <List.Header>{x.text}</List.Header>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n        <Button onClick={this.submit} fluid primary>\n          Save & Send SMS\n        </Button>\n        <Header size=\"medium\">{`REMOVE USERS FROM ${survey.toUpperCase()} SURVEY`}</Header>\n        <List animated verticalAlign=\"top\" size=\"medium\">\n          {selectedFiltered.map(x => (\n            <List.Item key={x.key}>\n              <List.Content floated=\"right\">\n                <Button negative onClick={() => this.handleRemove(x.key)}>\n                  Remove\n                </Button>\n              </List.Content>\n              <List.Icon name=\"close\" />\n              <List.Content>\n                <List.Header>{x.text}</List.Header>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      </StyledSurveyDiv>\n    );\n  }\n}\n\nexport default Selection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/admin/components/assignsurveys/Selection.js"],"sourceRoot":""}